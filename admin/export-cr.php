<?phpinclude("session.php");if (!isset($_SESSION['html'])) header("Location: index.php");// Require composer autoloadrequire_once __DIR__ . '../../vendor/autoload.php';$mpdf = new \Mpdf\Mpdf(['mode' => 'utf-8', 'format' => 'A4-L']);$mpdf->SetHTMLHeader('<table width="100%" style="text-align: left">    <tr>        <td width="94%"><h3>Cahier de Texte de ' . $_POST['libelle'] . '</h3></td>        <td><img class="rounded" src="../img/arep.png" height="1cm"></td>    </tr></table>');$mpdf->SetHTMLFooter('<table width="100%">    <tr>        <td width="90%" align="left">Document généré le : {DATE j/m/Y}</td>        <td align="right">{PAGENO}/{nbpg}</td>    </tr></table>');$mpdf->SetTitle('Cahier de Texte de ' . $_POST['libelle']);$mpdf->SetAuthor($_SESSION['nom'] . ' ' . $_SESSION['prenom']);$mpdf->WriteHTML("<style type='text/css'>h2, table {  text-align: center;}.table, th, .td {  text-align: center;  border: 1px solid black;  border-collapse: collapse;}    </style>");$mpdf->WriteHTML("<br>");$html = $_SESSION['html'];// Buffer the following html with PHP so we can store it to a variable later$html = strip_tags_content($_SESSION['html'], '<a><form><select>', TRUE); //suprime le contenu de la colonne actions.$html = strip_tags($html, '<table><thead><tbody><tr><th><td>');$html = str_replace('<table>', '<table class="table">', $html);$html = str_replace('<td>', '<td class="td">', $html);$html = str_replace('<td id="a">', null, $html);$html = str_replace(' </td>', null, $html); // 4 tabulation pour faire comme l'html.$html = str_replace('<th scope="col">Action</th>', '', $html); //Supprime le head de la colon ne actions.$html = str_replace("✔", "X", $html);$mpdf->WriteHTML($html);unset($_SESSION["html"]);$mpdf->Output();function strip_tags_content($text, $tags = '', $invert = FALSE){    preg_match_all('/<(.+?)[\s]*\/?[\s]*>/si', trim($tags), $tags);    $tags = array_unique($tags[1]);    if (is_array($tags) and count($tags) > 0) {        if ($invert == FALSE) {            return preg_replace('@<(?!(?:' . implode('|', $tags) . ')\b)(\w+)\b.*?>.*?</\1>@si', '', $text);        } else {            return preg_replace('@<(' . implode('|', $tags) . ')\b.*?>.*?</\1>@si', '', $text);        }    } elseif ($invert == FALSE) {        return preg_replace('@<(\w+)\b.*?>.*?</\1>@si', '', $text);    }    return $text;}